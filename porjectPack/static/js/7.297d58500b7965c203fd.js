webpackJsonp([7],{IDS8:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("AIn+"),i=e("gdqp"),o={name:"statistics",data:function(){return{msg:"统计",showcheck:!0,showstatistics:!0,showrule:!0,showsetting:!0,normal:0,error:0,absence:0,recordDate:new Date,recordDataList:[],statusArr:["正常","异常","缺勤"],items:[{message:"Foo",url:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{message:"Bar",url:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}],recordOutList:[]}},components:{Calendar:s.a},mounted:function(){this.getData(),this.getRecordOutData()},methods:{drawLine:function(){console.log(this.recordDataList);var t=this.$echarts.init(document.getElementById("myChart")),a={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:["正常","异常","缺勤"]},series:[{name:"上下班统计",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:this.recordDataList}]};t.setOption(a)},checkData:function(t){if(!this.inArray(t,"正常")){var a={},e={};a.value=0,a.name="正常",e.color="#67C23A",a.itemStyle=e,this.recordDataList.push(a)}if(!this.inArray(t,"异常")){var s={},i={};s.value=0,s.name="异常",i.color="#F56C6C",s.itemStyle=i,this.recordDataList.push(s)}if(!this.inArray(t,"缺勤")){var o={},r={};o.value=0,o.name="缺勤",r.color="#E6A23C",o.itemStyle=r,this.recordDataList.push(o)}this.drawLine()},getData:function(){var t=this;Object(i.a)(this.recordDate).then(function(a){var e=[];for(var s in a.data.data){var i={},o={};"正常"===a.data.data[s].status?(t.normal=a.data.data[s].count,o.color="#67C23A"):"异常"===a.data.data[s].status?(t.error=a.data.data[s].count,o.color="#F56C6C"):(t.absence=a.data.data[s].count,o.color="#E6A23C"),i.value=a.data.data[s].count,i.name=a.data.data[s].status,i.itemStyle=o,e.push(i)}t.recordDataList=e,t.checkData(t.recordDataList)})},getRecordOutData:function(){var t=this;Object(i.c)(this.recordDate).then(function(a){t.recordOutList=a.data.data})},inArray:function(t,a){for(var e in t)if(t[e].name===a)return!0;return!1},getSelectDate:function(t){this.recordDate=t.date,this.getData(),this.getRecordOutData()},goBackThing:function(){window.history.go(-1)},goAllreport:function(){this.$router.push("/allreport")},gocheck:function(){this.$router.push("/check")},gostatistics:function(){this.$router.push("/statistics")},gorule:function(){this.$router.push("/rule")},gosetting:function(){this.$router.push("/addadmin")}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"attendance"},[e("div",{staticClass:"heading"},[e("div",{staticClass:"black common",on:{click:t.goBackThing}},[e("i",{staticClass:"fa fa-arrow-left"})]),t._v(" "),e("div",{staticClass:"title common",staticStyle:{"align-items":"center"}},[t._v(t._s(t.msg))]),t._v(" "),e("div",{staticClass:"more common",on:{click:t.goAllreport}},[t._v("\n      月报\n    ")])]),t._v(" "),e("Calendar",{on:{transferDay:t.getSelectDate}}),t._v(" "),e("div",{staticClass:"statisticspiece"},[e("span",{staticClass:"stcspan"},[t._v("上下班统计")]),t._v(" "),e("div",{staticClass:"cotentinfo"},[e("el-row",[e("div",{staticClass:"vol-data"},[e("div",{style:{width:"100%",height:"300px"},attrs:{id:"myChart"}})])]),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6,offset:2}},[e("div",{staticClass:"grid-content bg-purple"}),t._v("正常:"),e("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(t.normal))])]),t._v(" "),e("el-col",{attrs:{span:6,offset:2}},[e("div",{staticClass:"grid-content bg-purple"}),t._v("异常:"),e("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(t.error))])]),t._v(" "),e("el-col",{attrs:{span:6,offset:2}},[e("div",{staticClass:"grid-content bg-purple"}),t._v("缺勤:"),e("span",{staticStyle:{color:"#E6A23C"}},[t._v(t._s(t.absence))])])],1)],1)]),t._v(" "),e("div",{staticClass:"statisticspiece"},[e("span",{staticClass:"stcspan"},[t._v("外出统计")]),t._v(" "),e("div",{staticClass:"cotentinfo"},[[e("el-row",{attrs:{gutter:40}},t._l(t.recordOutList,function(a){return e("el-col",{key:a.name,attrs:{span:4,offset:2}},[e("div",{staticClass:"grid-content"},[e("div",{staticStyle:{"text-align":"center"}},[e("el-avatar",{attrs:{src:a.avatar}})],1),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[t._v("\n                "+t._s(a.name)+"\n              ")])])])}),1)]],2)]),t._v(" "),e("div",{staticClass:"bottoming"},[t.showcheck?e("button",{staticClass:"clock-in bottomchildre",class:-1!==t.$route.path.indexOf("check")?"colortext":"colorcommon",on:{click:t.gocheck}},[e("i",{staticClass:"fa fa-map-marker"}),t._v(" "),e("span",[t._v("打卡")])]):t._e(),t._v(" "),t.showstatistics?e("button",{staticClass:"statistics bottomchildre",class:-1!==t.$route.path.indexOf("statistics")?"colortext":"colorcommon",on:{click:t.gostatistics}},[e("i",{staticClass:"fa fa-pie-chart"}),t._v(" "),e("span",[t._v("统计")])]):t._e(),t._v(" "),t.showrule?e("button",{staticClass:"rule bottomchildre",class:-1!==t.$route.path.indexOf("rule")?"colortext":"colorcommon",on:{click:t.gorule}},[e("i",{staticClass:"fa fa-sliders "}),t._v(" "),e("span",[t._v("规则")])]):t._e(),t._v(" "),t.showsetting?e("button",{staticClass:"setting bottomchildre",class:-1!==t.$route.path.indexOf("addadmin")?"colortext":"colorcommon",on:{click:t.gosetting}},[e("i",{staticClass:"fa fa-cog"}),t._v(" "),e("span",[t._v("设置")])]):t._e()])],1)},staticRenderFns:[]};var c=e("VU/8")(o,r,!1,function(t){e("nkz2")},"data-v-a312699c",null);a.default=c.exports},gdqp:function(t,a,e){"use strict";var s=e("Dd8w"),i=e.n(s),o=e("mtWM"),r=e.n(o).a.create({baseURL:Object({NODE_ENV:"production"}).VUE_APP_BASE_API,timeout:3e4}),c=function(t,a,e){return r(i()({url:t,params:a},e,{method:"get"}))};a.a=function(t){return c("/record/getRecordByDate",{recordDate:t})},a.c=function(t){return c("/recordOut/getRecordOutByTime",{recordTime:t})},a.b=function(t){return c("/record/getRecordCountByTime",{recordTime:t})}},nkz2:function(t,a){}});
//# sourceMappingURL=7.297d58500b7965c203fd.js.map