webpackJsonp([7],{IDS8:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("AIn+"),i=s("gdqp"),o={name:"statistics",data:function(){return{msg:"统计",showcheck:!0,showstatistics:!0,showrule:!0,showsetting:!0,normal:0,error:0,absence:0,recordDate:new Date,recordDataList:[],statusArr:["正常","异常","缺勤"],items:[{message:"Foo",url:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{message:"Bar",url:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}],recordOutList:[],userId:null,authority:null,showfoot:!1,showS:!1,showR:!1,showA:!1}},components:{Calendar:e.a},mounted:function(){this.getData(),this.getRecordOutData()},created:function(){this.userId=this.$route.query.userId,this.authority=parseInt(this.$route.query.authority),this.authority>1&&(this.showfoot=!0),console.log(this.authority),2===this.authority?this.showS=!0:3===this.authority?this.showR=!0:4===this.authority&&(this.showA=!0)},methods:{drawLine:function(){console.log(this.recordDataList);var t=this.$echarts.init(document.getElementById("myChart")),a={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:["正常","异常","缺勤"]},series:[{name:"上下班统计",type:"pie",radius:[50,70],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:this.recordDataList}]};t.setOption(a)},checkData:function(t){if(!this.inArray(t,"正常")){var a={},s={};a.value=0,a.name="正常",s.color="#67C23A",a.itemStyle=s,this.recordDataList.push(a)}if(!this.inArray(t,"异常")){var e={},i={};e.value=0,e.name="异常",i.color="#F56C6C",e.itemStyle=i,this.recordDataList.push(e)}if(!this.inArray(t,"缺勤")){var o={},r={};o.value=0,o.name="缺勤",r.color="#E6A23C",o.itemStyle=r,this.recordDataList.push(o)}this.drawLine()},getData:function(){var t=this;Object(i.a)(this.recordDate).then(function(a){var s=a.headers.userid;console.log(s);var e=[];for(var i in a.data.data){var o={},r={};"0"===a.data.data[i].status?(t.normal=a.data.data[i].count,a.data.data[i].status="正常",r.color="#67C23A"):"2"===a.data.data[i].status?(t.error=a.data.data[i].count,a.data.data[i].status="异常",r.color="#F56C6C"):(t.absence=a.data.data[i].count,a.data.data[i].status="缺勤",r.color="#E6A23C"),o.value=a.data.data[i].count,o.name=a.data.data[i].status,o.itemStyle=r,e.push(o)}t.recordDataList=e,t.checkData(t.recordDataList)})},getRecordOutData:function(){var t=this;Object(i.d)(this.recordDate).then(function(a){t.recordOutList=a.data.data})},inArray:function(t,a){for(var s in t)if(t[s].name===a)return!0;return!1},getSelectDate:function(t){this.recordDate=t.date,this.normal=0,this.error=0,this.absence=0,this.getData(),this.getRecordOutData()},goBackThing:function(){window.history.go(-1)},gocheck:function(){"/check"!==this.$route.path&&this.$router.push({path:"/check",query:{userId:this.userId,authority:this.authority}})},gostatistics:function(){"/statistics"!==this.$route.path&&this.$router.push({path:"/statistics",query:{userId:this.userId,authority:this.authority}})},gorule:function(){"/rule"!==this.$route.path&&this.$router.push({path:"/rule",query:{userId:this.userId,authority:this.authority}})},gosetting:function(){"/addadmin"!==this.$route.path&&this.$router.push({path:"/addadmin",query:{userId:this.userId,authority:this.authority}})}}},r={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"attendance"},[s("div",{staticClass:"heading"},[s("div",{staticClass:"black common",on:{click:t.goBackThing}},[s("i",{staticClass:"fa fa-arrow-left"})]),t._v(" "),s("div",{staticClass:"title common",staticStyle:{"align-items":"center"}},[t._v(t._s(t.msg))]),t._v(" "),s("div",{staticClass:"more common",on:{click:t.goAllreport}},[t._v("\n      月报\n    ")])]),t._v(" "),s("Calendar",{on:{transferDay:t.getSelectDate}}),t._v(" "),s("div",{staticClass:"statisticspiece"},[s("span",{staticClass:"stcspan"},[t._v("上下班统计")]),t._v(" "),s("div",{staticClass:"cotentinfo"},[s("el-row",[s("div",{staticClass:"vol-data"},[s("div",{style:{width:"100%",height:"200px"},attrs:{id:"myChart"}})])]),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:2}},[s("div",{staticClass:"grid-content bg-purple"}),t._v("正常:"),s("span",{staticStyle:{color:"#67C23A","font-weight":"700"}},[t._v(t._s(t.normal))])]),t._v(" "),s("el-col",{attrs:{span:6,offset:2}},[s("div",{staticClass:"grid-content bg-purple"}),t._v("异常:"),s("span",{staticStyle:{color:"#F56C6C","font-weight":"700"}},[t._v(t._s(t.error))])]),t._v(" "),s("el-col",{attrs:{span:6,offset:2}},[s("div",{staticClass:"grid-content bg-purple"}),t._v("缺勤:"),s("span",{staticStyle:{color:"#E6A23C","font-weight":"700"}},[t._v(t._s(t.absence))])])],1)],1)]),t._v(" "),s("div",{staticClass:"statisticspiece"},[s("span",{staticClass:"stcspan"},[t._v("外出统计")]),t._v(" "),s("div",{staticClass:"cotentinfo"},[[s("el-row",{attrs:{gutter:40}},t._l(t.recordOutList,function(a){return s("el-col",{key:a.name,attrs:{span:4,offset:2}},[s("div",{staticClass:"grid-content"},[s("div",{staticStyle:{"text-align":"center"}},[s("el-avatar",{attrs:{src:a.avatar}})],1),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[t._v("\n                "+t._s(a.name)+"\n              ")])])])}),1)]],2)]),t._v(" "),t.showfoot?s("div",{staticClass:"bottoming"},[s("button",{staticClass:"clock-in bottomchildre",class:-1!==t.$route.path.indexOf("check")?"colortext":"colorcommon",on:{click:t.gocheck}},[s("i",{staticClass:"fa fa-map-marker"}),t._v(" "),s("span",[t._v("打卡")])]),t._v(" "),t.showS||t.showR?s("button",{staticClass:"statistics bottomchildre",class:-1!==t.$route.path.indexOf("statistics")?"colortext":"colorcommon",on:{click:t.gostatistics}},[s("i",{staticClass:"fa fa-pie-chart"}),t._v(" "),s("span",[t._v("统计")])]):t._e(),t._v(" "),t.showR?s("button",{staticClass:"rule bottomchildre",class:-1!==t.$route.path.indexOf("rule")?"colortext":"colorcommon",on:{click:t.gorule}},[s("i",{staticClass:"fa fa-sliders "}),t._v(" "),s("span",[t._v("规则")])]):t._e(),t._v(" "),t.showA?s("button",{staticClass:"setting bottomchildre",class:-1!==t.$route.path.indexOf("addadmin")?"colortext":"colorcommon",on:{click:t.gosetting}},[s("i",{staticClass:"fa fa-cog"}),t._v(" "),s("span",[t._v("设置")])]):t._e()]):t._e()],1)},staticRenderFns:[]};var c=s("VU/8")(o,r,!1,function(t){s("iBix")},"data-v-7404cbf0",null);a.default=c.exports},gdqp:function(t,a,s){"use strict";a.a=function(t){return Object(e.a)("/record/getRecordByDate",{recordDate:t})},a.d=function(t){return Object(e.a)("/recordOut/getRecordOutByTime",{recordTime:t})},a.c=function(t){return Object(e.a)("/record/getRecordCountByTimeForECharts",{recordTime:t})},a.b=function(t){return Object(e.a)("/record/getRecordCountByTime",{recordTime:t})};var e=s("P0Gf")},iBix:function(t,a){}});
//# sourceMappingURL=7.ded582f452a0633326c4.js.map